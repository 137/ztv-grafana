<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600986 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="785"/>

<div>
<span><div>在docker上部署springcloud项目 <a href="https://www.jianshu.com/p/3f385c0a4af3">https://www.jianshu.com/p/3f385c0a4af3</a></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">1.在linux上安装docke</span>r <a href="https://www.cnblogs.com/qgc1995/archive/2018/08/29/9553572.html">https://www.cnblogs.com/qgc1995/archive/2018/08/29/9553572.html</a></div><div>打包springcloud项目的时候需要到父工程下的lifecycle（lifecycle是maven中一个十分完善的生命周期模型，所以使用Lifecycle中的install项目就会自动去maven仓库下载需要的包）</div><div>下完成clean、compile、deploy的操作才可</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>uname -a 查看内核版本</div><div>yum update</div><div>yum install -y yum-utils device-mapper-persistent-data lvm2</div><div>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</div><div>yum list docker-ce --showduplicates | sort -r</div><div>yum install docker-ce-17.12.1.ce</div><div>systemctl start docker</div><div>systemctl enable docker</div><div>docker version</div><div><br/></div></div><div><br/></div><div><span style="font-weight: bold;">2.安装wget命令</span> yum -y install wget</div><div>c.centos安装maven3.0  <a href="https://www.cnblogs.com/jikexianfeng/p/8454644.html">https://www.cnblogs.com/jikexianfeng/p/8454644.html</a>  注意下载地址需要到官网上找： <a href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">3.docker安装prometheus和grafana</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">a.下载镜像包</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker pull prom/node-exporter</div><div>docker pull prom/prometheus</div><div>docker pull grafana/grafana</div></div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">b.启动node exporter（</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">这个是监听机器的服务</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">）</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run -d -p 9100:9100 \</div><div>  -v &quot;/proc:/host/proc:ro&quot; \</div><div>  -v &quot;/sys:/host/sys:ro&quot; \</div><div>  -v &quot;/:/rootfs:ro&quot; \</div><div>  --net=&quot;host&quot; \</div><div>  prom/node-exporter</div></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(40, 44, 52); color: rgb(171, 178, 191); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">查看服务是否正常启动curl <a href="http://localhost:9100/metrics" style="background-color: rgb(40, 44, 52); font-size: 14px; font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">http://localhost:9100/metrics</a></span></div><div>如果在prometheus中发现此服务不能连接，请关闭防火墙再试</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>iptables -F</div></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">c.查看端口是否已经启动</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>netstat -anpt</div></div><div><br/></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 微软雅黑, PTSans, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">d.新建目录prometheus，编辑配置文件prometheus.yml</span></span></div><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px !important;"><div><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">mkdir</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/opt/</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">prometheus</span></div><div><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">cd</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/opt/prometheus/</span></div><div><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">vim prometheus.yml</span></div></div></div><div><br/></div><div><a href="docker安装部署grafana+prometheus_files/prometheus.yml"><img src="docker安装部署grafana+prometheus_files/a25a68e4e79304ad9333042ce71fe7ab.png" alt="prometheus.yml"></a></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑, PTSans, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">e.启动prometheus</span></div><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px !important;"><div><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">docker run -</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">d \</span></div><div><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">-p</span> <span style="font-size: 12px; color: rgb(128, 0, 128); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">9090</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">:</span><span style="font-size: 12px; color: rgb(128, 0, 128); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">9090</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">\</span></div><div><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">-v /opt/prometheus/prometheus.yml:/etc/prometheus/</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">prometheus.yml \</span></div><div><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">prom</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/prometheus</span></div></div></div><div>访问prometheus服务</div><div><span style="white-space: pre-wrap; overflow-wrap: break-word; font-size: 15px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">http:</span><span style="white-space: pre-wrap; overflow-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12px; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="white-space: pre-wrap; overflow-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12px; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">192.168.91.132:9090/targets</span></div><div><span style="white-space: pre-wrap; overflow-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12px !important;"><br/></span></div><div><span style="white-space: pre-wrap; overflow-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12px; font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">f.启动grafana</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 微软雅黑, PTSans, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">新建空文件夹grafana-storage，用来存储数据</span></span></div><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px !important;"><span style="white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">mkdir</span> <span style="white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/opt/grafana-storage</span></div></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 微软雅黑, PTSans, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">设置权限</span></span></div><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px !important;"><span style="white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">chmod</span> <span style="white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px; color: rgb(128, 0, 128); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">777</span> <span style="white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">-R /opt/grafana-storage</span></div></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 微软雅黑, PTSans, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">因为grafana用户会在这个目录写入文件，直接设置777，比较简单粗暴！</span></span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 微软雅黑, PTSans, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">启动grafana</span></span></div><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;"><div><span style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">docker run -</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">d \</span></div><div style="font-size: 12px !important;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">-p</span> <span style="font-size: 12px; color: rgb(128, 0, 128); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">3000</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">:</span><span style="font-size: 12px; color: rgb(128, 0, 128); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">3000</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">\</span></div><div style="font-size: 12px !important;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">--name=</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">grafana \</span></div><div style="font-size: 12px !important;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">-v /opt/grafana-storage:/var/lib/</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">grafana \</span></div><div style="font-size: 12px !important;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">-v /opt/grafana-public:/usr/share/grafana/public</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">\</span></div><div style="font-size: 12px !important;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">-v /opt/grafana-conf:/usr/share/grafana/conf</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">\</span></div><div style="font-size: 12px !important;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">grafana</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">/grafana</span></div></div></div><div>-v的命令是将grafana的conf文件和前端public文件持久化到外部linux上</div><div><br/></div><div><span style="font-weight: bold;">4.汉化grafana</span></div><div>下载我git上已经汉化好的源码在本地进行编译(需要先fork到自己工程中然后从自己工程中clone出来)</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>git clone git@github.com:137/grafana-chinese.git</div></div><div>安装nodejs安装npm <span style="background-color: rgb(255, 255, 255); font-size: 9pt;"><a href="https://blog.csdn.net/u011342720/article/details/81267908" style="background-color: rgb(255, 255, 255); font-size: 9pt; font-family: Consolas;">https://blog.csdn.net/u011342720/article/details/81267908</a></span></div><div>执行脚本</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>npm install --global --production windows-build-tools</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">npm build </span></div><div><font face="Monaco">如果需要在自己windows电脑上运行执行</font>npm install -g yarn ；  yarn install ； yarn start</div></div><div><br/></div><div><span style="font-weight: bold;">进入到linux服务器</span></div><div><br/></div><div>查看grafana docker服务名称</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker ps 查看正在运行中的容器  docker ps -a 查看所有的</div><div>如果发现容器没有起来则通过docker ps -a查询出所有的如下：</div><div>然后再通过docker start grafana启动，停止则是docker stop grafana,移除容器则是docker rm grafana</div></div><div><img src="docker安装部署grafana+prometheus_files/Image.png" type="image/png" data-filename="Image.png"/></div><div>进入docker容器</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>以管理员权限进入 的命令格式 docker exec -ti -u root 容器id（以上截图里的container id）  /bin/bash  或者/bin/sh</div><div><font face="Monaco">如果要退出输入exit</font></div></div><div><br/></div><div>进入到/usr/share/grafana会看到如下文件</div><div><br/></div><div><img src="docker安装部署grafana+prometheus_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div>接下来把public备份成public2然后从外部拷贝public进来</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">mv public public2</span></div><div><font face="Monaco">拷贝外部文件 </font>docker cp /opt/zch/public grafana:/usr/share/grafana</div></div><div>然后重启docker服务</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">退出到linux中exit</span></div><div>docker stop grafana</div><div>docker start grafana</div></div><div><br/></div><div>然后访问 <a href="http://192.168.19.130:3000/?orgId=1">http://192.168.19.130:3000/?orgId=1</a>就发现已经汉化好了</div><div><br/></div><div><img src="docker安装部署grafana+prometheus_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><span style="font-weight: bold;">5.</span><span style="background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">邮件发送和报警功能设置需要先配置</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">smtp</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">邮件服务器</span></span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">参考文档：</span><a href="http://www.imooc.com/article/73338" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 238); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">http://www.imooc.com/article/73338</a><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><a href="https://blog.csdn.net/u012013791/article/details/79522920" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 238); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">https://blog.csdn.net/u012013791/article/details/79522920</a></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">进入到docker</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">修改</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">grafana</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">的</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">default.ini</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">的配置，如下【在此采用的</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">qq</span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">邮箱作为服务器】：</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">[smtp]</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">enabled = true</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">host =</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><a href="http://smtp.qq.com:465/" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 238); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">smtp.qq.com:465</a></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">user =</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><a href="mailto:251305396@qq.com" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 238); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">251305396@qq.com</a></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">password = tvpabplzhvfsbhbj</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">cert_file =</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">key_file =</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">skip_verify = false</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">from_address =</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><a href="mailto:251305396@qq.com" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 238); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">251305396@qq.com</a></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">from_name = zjiptv_grafana</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">ehlo_identity =</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt;"><br/></span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;"> password</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">【这个是</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">qq</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">邮箱中的</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">smtp</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">的授权码】</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">然后就是仪表板的界面配置了：</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">a.</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">到</span><a href="http://localhost:3333/alerting/notifications" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 238); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">http://localhost:3333/alerting/notifications</a><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">页面配置通知频道然后配置邮件地址即可，就会产生一条通知频道的配置</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">b.</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">到</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">dashboard</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">仪表板中条件规则然后配置</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">alert</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">发送目的地以及信息即可，当数据满足此条件就会发送邮件到以上配置的通知频道中的地址了，</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">同时在</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 9pt; color: rgb(0, 0, 0); font-family: Consolas; font-variant-caps: normal; font-variant-ligatures: normal;">alert rules</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">也会产生一条报警</span></div><div><br/></div><div><span style="font-weight: bold;">6.springcloud引入prometheus的依赖和相关配置</span></div><div><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体;">项目搭建参考文档【</span><span style="background-color: rgb(255, 255, 255); font-size: 9pt;"><a href="https://www.cnblogs.com/dalaoyang/p/10508817.html" style="background-color: rgb(255, 255, 255); font-size: 9pt; font-family: Consolas;">https://www.cnblogs.com/dalaoyang/p/10508817.html</a></span><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 宋体;">】</span></div><div>启动springcloud服务</div><div><br/></div><div><span style="font-weight: bold;">7.修改linux系统中的prometheus.yml的配置地址为所起springcloud服务地址</span></div><div><br/></div><div><span style="font-weight: bold;">8.grafana页面上进行相关的操作，设置数据源</span></div><div><img src="docker安装部署grafana+prometheus_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div>配置prometheus地址</div><div><img src="docker安装部署grafana+prometheus_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div>由于docker有映射端口问题所以直接选择Browser吧</div><div><br/></div><div>导入仪表板</div><div><img src="docker安装部署grafana+prometheus_files/Image [5].png" type="image/png" data-filename="Image.png"/></div><div>然后上传json文件即可（注意json中的<span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: Consolas; font-weight: bold;">datasource必须与你新建的一样，否则需要到仪表板上全部重新配置</span>）</div><div><img src="docker安装部署grafana+prometheus_files/Image [6].png" type="image/png" data-filename="Image.png"/></div><div>对于grafana具体细节的操作还请自行百度</div><div><img src="docker安装部署grafana+prometheus_files/Image [7].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><span style="font-weight: bold;">9.打包容器为镜像到其它服务器部署</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span>    </span><br/></div></div><div>删除镜像</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker rmi c38a63d2bb56</div></div><div>查询镜像</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker images</div></div><div>将镜像生产文件（参数是容器id）</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker export 5c8e5db9c3c7&gt; update.tar</div></div><div><a href="https://blog.csdn.net/x6_9x/article/details/72891404">https://blog.csdn.net/x6_9x/article/details/72891404</a></div><div><br/></div><div>导入镜像</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker load &lt;update.tar</div></div><div style="margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="margin: 0px; padding: 0px;"><div style="padding: 0px; width: 848.008px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important;"></div></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><br/></div><div>从宿主机拷文件到容器里面</div><div>      答：在宿主机里面执行如下命令</div><div>              docker cp 要拷贝的文件路径 容器名：要拷贝到容器里面对应的路径</div><div>       示例：假设容器名为testtomcat,现在要将宿主机/opt/test.js文件拷贝到容器里面的/usr/local/tomcat/webapps/test/js路径下面，那么命令该怎么写呢？</div><div>       答案：在宿主机上面执行如下命令     </div><div>docker cp /opt/zch/public.rar grafana:/usr/share/grafana</div><div><br/></div><div>从容器里面拷文件到宿主机？</div><div>     答：在宿主机里面执行以下命令</div><div>             docker cp 容器名：要拷贝的文件在容器里面的路径       要拷贝到宿主机的相应路径</div><div>     示例： 假设容器名为testtomcat,要从容器里面拷贝的文件路为：/usr/local/tomcat/webapps/test/js/test.js,  现在要将test.js从容器里面拷到宿主机的/opt路径下面，那么命令应该怎么写呢？</div><div>     答案：在宿主机上面执行命令</div><div>docker cp grafana:/usr/share/grafana/public /opt/zch</div><div><br/></div><div><br/></div></div><div><br/></div><div>端口有9100 9090 3000</div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 